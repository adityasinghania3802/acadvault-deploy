FROM node:18-alpine

WORKDIR /app

COPY package*.json .

ARG MONGODB_CONNECTION_STRING
ARG AUTH0_AUDIENCE
ARG AUTH0_ISSUER_BASE_URL

ENV MONGODB_CONNECTION_STRING=${MONGODB_CONNECTION_STRING}
ENV AUTH0_AUDIENCE=${AUTH0_AUDIENCE}
ENV AUTH0_ISSUER_BASE_URL=${AUTH0_ISSUER_BASE_URL}

RUN npm install

# RUN npm install --only=dev

COPY . .

EXPOSE 7000

CMD ["npm", "run", "dev"]